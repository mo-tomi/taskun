# Taskun - 構造化プランナー

シンプルで美しいタイムライン型タスク管理アプリケーション

## ✨ 特徴

### 🚀 クイック追加UI（100点仕様）
- **瞬間的時間設定**: 現在時刻の自動設定とワンクリック設定
- **視覚的即座性**: リアルタイムプレビューとアニメーション
- **効率的ワークフロー**: ワンクリック操作とスマート入力

### 🎛️ 直感的な操作
- クイック追加ボタン（右下の「+」ボタン）
- ワンクリックでタスク追加フォームを開く
- 現在時刻の自動設定
- シンプルなマウス操作のみ

### ⏰ スマート時間管理
- 現在時刻の自動設定
- 時間プリセット（15/30/60/120分）
- 開始時刻変更時の自動終了時刻計算
- タスクの重なり問題を解決した削除機能


### 🎯 主要機能
- **タイムライン表示**: 直感的な時間軸でのタスク管理
- **📝 タスク待機リスト**: まず思いついたタスクを登録、後でスケジュールに配置
- **エネルギートラッキング**: 日々の活力レベルの記録
- **統計表示**: タスク完了率や習慣の連続記録
- **重なり解決**: 複数タスクが重なった時でも適切に操作可能

### 今後実装予定の機能
- **エネルギー推移グラフ拡大**: 

## 🔄 最近の更新

### v1.2.9: タスクカードの表示改善（最小高さ保証）
**更新日**: 2025年1月10日

#### ✨ 機能改善
- **短いタスクでも常に読めるサイズを確保**:
  - 15分や30分などの短いタスクでも、最低60px（約2行分）の高さを保証するようになりました。
  - これにより、タスクのタイトルが常に視認可能になり、ホバーしなくても内容が確認できます。

#### 🎨 UI/UX改善
- **2行タイトル表示**: 
  - タスクタイトルが2行まで表示可能になり、長いタスク名でも省略されすぎることがなくなりました。
  - `line-clamp-2`を使用してエレガントな省略表示を実装しました。
- **レイアウト最適化**:
  - チェックボタンを右上に固定配置し、タイトルとの重複を防止しました。
  - 時間表示とタイトル表示を適切に分離し、情報の階層を明確化しました。
  - 横幅が狭いタスクでも必要な情報が見えるよう、パディングと配置を調整しました。

#### 🔧 技術的改善
- **高さ計算ロジック**: 実時間ベースの高さは維持しつつ、最小高さ（60px）を保証する計算式に改善しました。
- **CSS最適化**: `WebkitLineClamp`を使用したマルチライン省略表示で、ブラウザ互換性を確保しました。
- **レスポンシブ対応**: 狭いタスク幅でも読みやすいよう、フォントサイズとスペーシングを動的に調整します。

#### 🐛 解決した問題
- 短時間（15分〜30分）のタスクでタイトルが潰れて読めない問題
- ホバーしないとタスク内容が確認できない問題
- タスクカード内の要素が重複して表示される問題

### v1.2.8: 検索機能の削除とUIのシンプル化
**更新日**: 2025年1月10日

#### ✨ 機能改善
- **検索機能の完全削除**:
  - アプリケーションから検索機能を完全に削除し、UIをよりシンプルで直感的にしました。
  - ヘッダーから検索アイコンを削除し、関連するコンポーネント (`SearchFilter.tsx`) と状態管理ロジックも全てクリーンアップしました。

#### 🎨 技術的改善
- **コードのクリーンアップ**: 不要になった`SearchFilter.tsx`コンポーネントと関連する状態管理 (`showSearch`, `filteredTasks`) を`App.tsx`から削除し、コードベースを軽量化しました。
- **アイコンの整理**: `lucide-react`からのインポート文を整理し、不要なアイコンを削除しました。

#### 🐛 解決した問題
- 不要な機能（検索）がUIを複雑にしていた問題。

### v1.2.7: タスクの重なり表示改善
**更新日**: 2025年1月9日

#### ✨ 機能改善
- **タスクの重なり表示を改善**:
  - 同じ時間帯に複数のタスクが存在する場合でも、タスクが重ならずに並列で表示されるようになりました。
  - `calculateOverlappingLayout`ユーティリティを新規に作成し、タスクの`left`と`width`を動的に計算します。
  - これにより、タイムラインの視認性が大幅に向上し、過密なスケジュールでもタスクを明確に把握できます。

#### 🎨 技術的改善
- **レイアウト計算ロジック**: `src/utils/layoutUtils.ts`を新設し、高度なレイアウト計算ロジックを実装しました。
- **コンポーネントの最適化**: `Timeline.tsx`にレイアウトロジックを統合し、`useMemo`フックでパフォーマンスを最適化しました。
- **UI調整**: 重なったタスクが見やすくなるように、タスクカードのパディングやフォントサイズなどのスタイルを微調整しました。

#### 🐛 解決した問題
- 複数のタスクが同じ時間帯にある場合に、表示が重なってしまい、後ろのタスクが見えなくなる・操作できなくなる問題。

### v1.2.6: タイムライン表示の改善と無限スクロール実装
**更新日**: 2025年1月8日

#### ✨ 新機能
- **無限スクロール機能**:
  - タイムラインを下にスクロールすると、自動的に次の日のスケジュールが読み込まれます。
  - `Intersection Observer API` を活用し、スムーズな日付遷移を実現しました。
  - これにより、週や月をまたいでシームレスにスケジュールを確認できます。

#### 🔧 修正内容
- **タスク表示の縦幅の不整合を修正**:
  - タスクに設定された時間と、タイムライン上での視覚的な縦幅が正確に一致するように修正しました。
  - `timeToMinutes` ユーティリティを使用し、分単位での精密な高さ計算を実装しました。
  - 時間あたりのピクセル数を定数として管理することで、一貫性のある表示を保証します。

#### 🎨 技術的改善
- **リファクタリング**: `Timeline.tsx` の高さ計算ロジックをリファクタリングし、可読性と保守性を向上させました。
- **Props整理**: 不要になった `onTaskEdit` と `onTaskReplan` プロパティを `Timeline` コンポーネントから削除しました。
- **パフォーマンス**: `useRef` を使用して不要な再レンダリングを避け、スクロール時のパフォーマンスを最適化しました。

#### 🐛 解決した問題
- タスクの開始・終了時間と、タイムライン上の表示高さが一致しない問題。
- 複数日タスクの表示が不正確になることがある問題。

### v1.2.5: 重要なバグ修正とエネルギートラッキング改善
**更新日**: 2025年1月7日

- **エネルギーレベル記録機能の修正**: 
  - `crypto.randomUUID()`の互換性問題を解決
  - より互換性のあるID生成方式に変更
  - デバッグログを追加してエネルギー記録プロセスを可視化
  - LocalStorage保存の安定性を向上

- **日をまたぐタスク表示の修正**: 
  - Timeline.tsxで複数日タスクセグメントを適切に処理
  - `taskSegments`配列を活用した正確な表示ロジック
  - TaskWithSegment型を定義して型安全性を確保
  - セグメント固有のキー使用により重複表示を防止
  - 日をまたぐタスクが各日に適切なセグメントとして表示されるように改善

- **技術的改善**: 
  - TypeScript型定義の強化
  - React useMemoを活用したパフォーマンス最適化
  - 複数日タスクの時間計算ロジック改善
  - エラーハンドリングの強化

- **解決した問題**: 
  - エネルギーレベルがスライダーやボタンで記録されない問題
  - 日をまたぐタスク（23:00-02:00など）の表示が正しくない問題
  - 複数日タスクのセグメント表示の不具合
  - ブラウザ互換性に関する問題

### v1.2.4 - 集中モード削除（2024年12月28日）
- **集中モード機能削除**: よりシンプルなタスク管理に集中するため、集中モード（フォーカスモード）機能を削除
- **コード簡素化**: 
  - `FocusMode.tsx`コンポーネント削除
  - App.tsxから関連する状態管理と関数削除
  - Timeline.tsxからonTaskFocusプロパティ削除
- **UI最適化**: 不要な機能を削除することで、よりシンプルで使いやすいインターフェースに改善
- **影響範囲**: 
  - `src/components/FocusMode/`ディレクトリ削除
  - `App.tsx`のhandleTaskFocus、handleUpdateSubtask関数削除
  - `Timeline.tsx`のTimelinePropsインターフェース最適化

### v1.2.3 - タスク追加UI改善（2024年12月28日）
- **日時設定の統合**: 独立していた日付設定を時間設定に統合し、より直感的なUIに改善
- **Todoリスト機能追加**: 
  - 📝 タスク待機リスト機能を新規実装
  - 優先度管理（緊急🔥、高⚡、中📝、低📋）
  - 複数選択でスケジュールに一括変換
  - ヘッダーツールバーの📝ボタンでアクセス
- **UI最適化**: 
  - 「時間設定」→「日時設定」にラベル変更
  - 開始日・開始時刻を並列配置
  - 「今日」ボタンと「現在時刻」ボタンを並列配置
  - フォーム項目の整理とスペース最適化
- **操作性向上**: 日付と時間を同じセクションで設定できるようになり、操作が簡素化
- **影響範囲**: 
  - `QuickAdd.tsx`コンポーネントのUI構造改善
  - `useTodos.ts`フック新規作成
  - `App.tsx`にTodoリスト機能統合
  - `types/index.ts`にTodoItem型追加

### v1.2.2 - タスク追加機能強化（2024年12月28日）
- **15分刻み時間設定機能追加**: QuickAddコンポーネントで15分単位の詳細な時間設定が可能に
- **タスク日付選択機能追加**: 特定の日付を指定してタスクを作成できる機能を実装
- **UI改善**: 
  - time inputからselectボックスに変更し、15分刻みの時間選択肢を提供
  - 日付選択フィールドを基本設定に追加
  - リアルタイムプレビュー機能でタスク情報を即座に確認可能
- **日をまたぐタスク対応強化**: 
  - 設定した日付に基づく翌日計算の修正
  - 詳細設定での複数日タスク表示の改善
  - 終了日の自動計算ロジック強化
- **影響範囲**: 
  - `QuickAdd.tsx`